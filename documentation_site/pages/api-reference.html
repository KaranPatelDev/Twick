<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference - Twick Documentation</title>
    <meta name="description" content="Complete API reference for Twick social media platform">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="../assets/css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                Twick Docs
            </a>
            
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="architecture.html">Architecture</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="api-reference.html">API Reference</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="containerization.html">Containerization</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Content -->
    <section class="section" style="padding-top: 120px;">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="sidebar">
                        <h4>API Reference</h4>
                        <ul class="sidebar-nav">
                            <li><a href="#overview" class="active">Overview</a></li>
                            <li><a href="#authentication">Authentication</a></li>
                            <li><a href="#tweets">Tweet Management</a></li>
                            <li><a href="#users">User Management</a></li>
                            <li><a href="#social">Social Features</a></li>
                            <li><a href="#messaging">Direct Messaging</a></li>
                            <li><a href="#search">Search & Discovery</a></li>
                            <li><a href="#notifications">Notifications</a></li>
                            <li><a href="#errors">Error Handling</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-lg-9">
                    <h1>API Reference</h1>
                    <p class="lead">Complete reference for all Twick API endpoints with examples and response formats.</p>
                    
                    <!-- Overview -->
                    <section id="overview" class="mb-5">
                        <h2>API Overview</h2>
                        <p>The Twick API follows RESTful principles and uses standard HTTP methods for CRUD operations.</p>
                        
                        <div class="card">
                            <div class="card-body">
                                <h4>Base Information</h4>
                                <ul>
                                    <li><strong>Base URL:</strong> <code>https://yourdomain.com/api/</code></li>
                                    <li><strong>Authentication:</strong> Session-based or Token-based</li>
                                    <li><strong>Content Type:</strong> <code>application/json</code></li>
                                    <li><strong>Rate Limiting:</strong> 100 requests per minute per user</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-body">
                                <h4>HTTP Status Codes</h4>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Code</th>
                                                <th>Status</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge badge-success">200</span></td>
                                                <td>OK</td>
                                                <td>Request successful</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge badge-success">201</span></td>
                                                <td>Created</td>
                                                <td>Resource created successfully</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge badge-warning">400</span></td>
                                                <td>Bad Request</td>
                                                <td>Invalid request parameters</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge badge-warning">401</span></td>
                                                <td>Unauthorized</td>
                                                <td>Authentication required</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge badge-warning">403</span></td>
                                                <td>Forbidden</td>
                                                <td>Access denied</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge badge-danger">404</span></td>
                                                <td>Not Found</td>
                                                <td>Resource not found</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge badge-danger">500</span></td>
                                                <td>Server Error</td>
                                                <td>Internal server error</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Authentication -->
                    <section id="authentication" class="mb-5">
                        <h2>Authentication</h2>
                        <p>Twick supports multiple authentication methods for different use cases.</p>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Method</th>
                                        <th>Endpoint</th>
                                        <th>Description</th>
                                        <th>Request Body</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/register/</code></td>
                                        <td>User registration</td>
                                        <td>username, email, password, password_confirm</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/login/</code></td>
                                        <td>User login</td>
                                        <td>username, password</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/logout/</code></td>
                                        <td>User logout</td>
                                        <td>None</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h3>Registration Example</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">javascript</span>
                                <button class="copy-btn">Copy</button>
                            </div>
                            <div class="code-content">
// POST /register/
const response = await fetch('/register/', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-CSRFToken': getCookie('csrftoken')
    },
    body: JSON.stringify({
        username: 'newuser',
        email: 'user@example.com',
        password: 'securepassword123',
        password_confirm: 'securepassword123'
    })
});

const data = await response.json();
console.log(data);

// Response
{
    "success": true,
    "message": "Account created successfully",
    "user": {
        "id": 123,
        "username": "newuser",
        "email": "user@example.com"
    }
}
                            </div>
                        </div>
                    </section>
                    
                    <!-- Tweet Management -->
                    <section id="tweets" class="mb-5">
                        <h2>Tweet Management</h2>
                        <p>Create, read, update, and delete tweets with full CRUD operations.</p>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Method</th>
                                        <th>Endpoint</th>
                                        <th>Description</th>
                                        <th>Auth Required</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/tweets/</code></td>
                                        <td>List all tweets</td>
                                        <td>No</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/tweets/create/</code></td>
                                        <td>Create new tweet</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/tweet/&lt;id&gt;/</code></td>
                                        <td>Get tweet details</td>
                                        <td>No</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">PUT</span></td>
                                        <td><code>/tweet/&lt;id&gt;/edit/</code></td>
                                        <td>Edit tweet</td>
                                        <td>Yes (Owner)</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge badge-danger">DELETE</span></td>
                                        <td><code>/tweet/&lt;id&gt;/delete/</code></td>
                                        <td>Delete tweet</td>
                                        <td>Yes (Owner)</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/tweet/&lt;id&gt;/like/</code></td>
                                        <td>Like/unlike tweet</td>
                                        <td>Yes</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h3>Create Tweet Example</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">javascript</span>
                                <button class="copy-btn">Copy</button>
                            </div>
                            <div class="code-content">
// POST /tweets/create/
const formData = new FormData();
formData.append('text', 'Hello world! #FirstTweet');
formData.append('privacy', 'public');
formData.append('image', fileInput.files[0]); // Optional

const response = await fetch('/tweets/create/', {
    method: 'POST',
    headers: {
        'X-CSRFToken': getCookie('csrftoken')
    },
    body: formData
});

const data = await response.json();

// Response
{
    "success": true,
    "tweet": {
        "id": 456,
        "text": "Hello world! #FirstTweet",
        "user": {
            "id": 123,
            "username": "newuser"
        },
        "created_at": "2024-12-08T10:30:00Z",
        "likes_count": 0,
        "replies_count": 0,
        "privacy": "public",
        "image_url": "/media/photos/image.jpg"
    }
}
                            </div>
                        </div>
                        
                        <h3>Like Tweet Example</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">javascript</span>
                                <button class="copy-btn">Copy</button>
                            </div>
                            <div class="code-content">
// POST /tweet/456/like/
const response = await fetch('/tweet/456/like/', {
    method: 'POST',
    headers: {
        'X-CSRFToken': getCookie('csrftoken'),
        'X-Requested-With': 'XMLHttpRequest'
    }
});

const data = await response.json();

// Response
{
    "liked": true,
    "likes_count": 1
}
                            </div>
                        </div>
                    </section>
                    
                    <!-- User Management -->
                    <section id="users" class="mb-5">
                        <h2>User Management</h2>
                        <p>Manage user profiles and social connections.</p>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Method</th>
                                        <th>Endpoint</th>
                                        <th>Description</th>
                                        <th>Auth Required</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/profile/&lt;username&gt;/</code></td>
                                        <td>View user profile</td>
                                        <td>No</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/profile/edit/</code></td>
                                        <td>Edit own profile</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/profile/&lt;username&gt;/follow/</code></td>
                                        <td>Follow/unfollow user</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/profile/&lt;username&gt;/followers/</code></td>
                                        <td>List user followers</td>
                                        <td>No</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/profile/&lt;username&gt;/following/</code></td>
                                        <td>List users being followed</td>
                                        <td>No</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h3>Follow User Example</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">javascript</span>
                                <button class="copy-btn">Copy</button>
                            </div>
                            <div class="code-content">
// POST /profile/johndoe/follow/
const response = await fetch('/profile/johndoe/follow/', {
    method: 'POST',
    headers: {
        'X-CSRFToken': getCookie('csrftoken'),
        'X-Requested-With': 'XMLHttpRequest'
    }
});

const data = await response.json();

// Response
{
    "action": "followed",
    "button_text": "Following",
    "button_class": "btn-primary",
    "followers_count": 42
}
                            </div>
                        </div>
                    </section>
                    
                    <!-- Social Features -->
                    <section id="social" class="mb-5">
                        <h2>Social Features</h2>
                        <p>Advanced social features including comments, replies, and user interactions.</p>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Method</th>
                                        <th>Endpoint</th>
                                        <th>Description</th>
                                        <th>Auth Required</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/tweet/&lt;id&gt;/comment/</code></td>
                                        <td>Add comment to tweet</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/tweet/&lt;id&gt;/reply/</code></td>
                                        <td>Reply to tweet</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/follow-requests/</code></td>
                                        <td>List follow requests</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/api/block/&lt;username&gt;/</code></td>
                                        <td>Block user</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/api/mute/&lt;username&gt;/</code></td>
                                        <td>Mute user</td>
                                        <td>Yes</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h3>Add Comment Example</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">javascript</span>
                                <button class="copy-btn">Copy</button>
                            </div>
                            <div class="code-content">
// POST /tweet/456/comment/
const response = await fetch('/tweet/456/comment/', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-CSRFToken': getCookie('csrftoken')
    },
    body: JSON.stringify({
        text: 'Great tweet! Thanks for sharing.'
    })
});

const data = await response.json();

// Response
{
    "success": true,
    "comment": {
        "id": 789,
        "text": "Great tweet! Thanks for sharing.",
        "user": {
            "id": 123,
            "username": "newuser"
        },
        "created_at": "2024-12-08T10:35:00Z"
    }
}
                            </div>
                        </div>
                    </section>
                    
                    <!-- Direct Messaging -->
                    <section id="messaging" class="mb-5">
                        <h2>Direct Messaging</h2>
                        <p>Private messaging system with support for individual and group conversations.</p>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Method</th>
                                        <th>Endpoint</th>
                                        <th>Description</th>
                                        <th>Auth Required</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/messages/</code></td>
                                        <td>List conversations</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/messages/&lt;id&gt;/</code></td>
                                        <td>View conversation</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/messages/start/</code></td>
                                        <td>Start new conversation</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/messages/&lt;id&gt;/send/</code></td>
                                        <td>Send message</td>
                                        <td>Yes</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h3>Send Message Example</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">javascript</span>
                                <button class="copy-btn">Copy</button>
                            </div>
                            <div class="code-content">
// POST /messages/123/send/
const formData = new FormData();
formData.append('message', 'Hey! How are you doing?');
formData.append('file', fileInput.files[0]); // Optional

const response = await fetch('/messages/123/send/', {
    method: 'POST',
    headers: {
        'X-CSRFToken': getCookie('csrftoken')
    },
    body: formData
});

const data = await response.json();

// Response
{
    "success": true,
    "message": {
        "id": 999,
        "text": "Hey! How are you doing?",
        "sender": "newuser",
        "timestamp": "2024-12-08T10:40:00Z",
        "file_url": null
    }
}
                            </div>
                        </div>
                    </section>
                    
                    <!-- Search -->
                    <section id="search" class="mb-5">
                        <h2>Search & Discovery</h2>
                        <p>Search functionality for tweets, users, and hashtags.</p>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Method</th>
                                        <th>Endpoint</th>
                                        <th>Description</th>
                                        <th>Parameters</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/search/</code></td>
                                        <td>Search all content</td>
                                        <td>q, type, limit</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/hashtag/&lt;name&gt;/</code></td>
                                        <td>View hashtag page</td>
                                        <td>None</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/trending/</code></td>
                                        <td>Trending hashtags</td>
                                        <td>limit</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h3>Search Example</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">javascript</span>
                                <button class="copy-btn">Copy</button>
                            </div>
                            <div class="code-content">
// GET /search/?q=django&type=tweets&limit=20
const response = await fetch('/search/?q=django&type=tweets&limit=20');
const data = await response.json();

// Response
{
    "results": {
        "tweets": [
            {
                "id": 789,
                "text": "Learning Django is amazing! #django",
                "user": {
                    "username": "developer123",
                    "avatar_url": "/media/avatars/dev.jpg"
                },
                "created_at": "2024-12-08T10:30:00Z"
            }
        ],
        "users": [
            {
                "username": "djangoguru",
                "full_name": "Django Expert",
                "bio": "Django developer and educator"
            }
        ],
        "hashtags": [
            {
                "name": "django",
                "tweet_count": 1543
            }
        ]
    },
    "total_count": 45
}
                            </div>
                        </div>
                    </section>
                    
                    <!-- Notifications -->
                    <section id="notifications" class="mb-5">
                        <h2>Notifications</h2>
                        <p>Real-time notification system for user interactions.</p>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Method</th>
                                        <th>Endpoint</th>
                                        <th>Description</th>
                                        <th>Auth Required</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/notifications/</code></td>
                                        <td>List notifications</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">GET</span></td>
                                        <td><code>/api/notifications/count/</code></td>
                                        <td>Unread count</td>
                                        <td>Yes</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge">POST</span></td>
                                        <td><code>/api/notifications/&lt;id&gt;/read/</code></td>
                                        <td>Mark as read</td>
                                        <td>Yes</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h3>Get Notifications Example</h3>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">javascript</span>
                                <button class="copy-btn">Copy</button>
                            </div>
                            <div class="code-content">
// GET /api/notifications/count/
const response = await fetch('/api/notifications/count/', {
    headers: {
        'X-Requested-With': 'XMLHttpRequest'
    }
});

const data = await response.json();

// Response
{
    "unread_count": 5
}

// GET /notifications/
const notificationsResponse = await fetch('/notifications/');
const notifications = await notificationsResponse.json();

// Response
{
    "notifications": [
        {
            "id": 1,
            "type": "like",
            "message": "johndoe liked your tweet",
            "is_read": false,
            "created_at": "2024-12-08T10:30:00Z",
            "sender": {
                "username": "johndoe",
                "avatar_url": "/media/avatars/john.jpg"
            }
        }
    ]
}
                            </div>
                        </div>
                    </section>
                    
                    <!-- Error Handling -->
                    <section id="errors" class="mb-5">
                        <h2>Error Handling</h2>
                        <p>Standard error responses and troubleshooting guide.</p>
                        
                        <div class="card">
                            <div class="card-body">
                                <h4>Error Response Format</h4>
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-lang">json</span>
                                        <button class="copy-btn">Copy</button>
                                    </div>
                                    <div class="code-content">
// Standard error response
{
    "error": true,
    "message": "Validation failed",
    "details": {
        "field_name": ["This field is required"],
        "another_field": ["Invalid value"]
    },
    "error_code": "VALIDATION_ERROR"
}

// Authentication error
{
    "error": true,
    "message": "Authentication required",
    "error_code": "AUTH_REQUIRED"
}

// Permission error
{
    "error": true,
    "message": "You don't have permission to perform this action",
    "error_code": "PERMISSION_DENIED"
}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-body">
                                <h4>Common Error Codes</h4>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Code</th>
                                                <th>Description</th>
                                                <th>Solution</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><code>AUTH_REQUIRED</code></td>
                                                <td>User must be logged in</td>
                                                <td>Login or provide valid session</td>
                                            </tr>
                                            <tr>
                                                <td><code>PERMISSION_DENIED</code></td>
                                                <td>Insufficient permissions</td>
                                                <td>Check user role and ownership</td>
                                            </tr>
                                            <tr>
                                                <td><code>VALIDATION_ERROR</code></td>
                                                <td>Invalid input data</td>
                                                <td>Check field requirements</td>
                                            </tr>
                                            <tr>
                                                <td><code>RATE_LIMITED</code></td>
                                                <td>Too many requests</td>
                                                <td>Wait and retry later</td>
                                            </tr>
                                            <tr>
                                                <td><code>RESOURCE_NOT_FOUND</code></td>
                                                <td>Requested resource doesn't exist</td>
                                                <td>Verify resource ID</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="text-center">
                <p>&copy; 2024 Twick Documentation. Built with ❤️ for the Django community.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/main.js"></script>
</body>
</html>
